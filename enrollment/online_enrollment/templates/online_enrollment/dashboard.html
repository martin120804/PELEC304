{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Dashboard — Students & Subjects</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <div class="wrap">
    <div class="toplinks">
      <h2>Student Dashboard</h2>
      <div>
        <a class="link" href="{% url 'profile' %}">My Profile</a> |
        <a class="link" href="{% url 'home' %}">Home</a> |
        <a class="link" href="{% url 'logout_user' %}">Logout</a>
      </div>
    </div>

    <div class="card">
      <h3>All Students</h3>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Student ID</th>
            <th>Course</th>
            <th>Year</th>
            <th>Section</th>
            <th>Email</th>
            <th class="small">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for s in students %}
          <tr>
            <td>{{ s.name|default:s.user.username }}</td>
            <td>{{ s.student_id|default:"—" }}</td>
            <td>{{ s.course|default:"—" }}</td>
            <td>{{ s.year|default:"—" }}</td>
            <td>{{ s.section|default:"—" }}</td>
            <td class="small">{{ s.user.email|default:"—" }}</td>
            <td class="actions">
              <a class="btn-view" href="{% url 'profile' %}?u={{ s.user.id }}">View</a>
              {% if user.is_staff %}
                <a class="btn-edit" href="{% url 'edit_profile' %}?u={{ s.user.id }}">Edit</a>
                <a class="btn-delete" href="{% url 'admin:online_enrollment_student_change' s.id %}">Manage</a>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="7" class="small">No students yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="card">
      <h3>All Subjects</h3>
      <table>
        <thead>
          <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Instructor</th>
            <th>Room</th>
            <th>Department</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody>
          {% for sub in subjects %}
          <tr>
            <td>{{ sub.subject_code }}</td>
            <td>{{ sub.subject_name }}</td>
            <td>{{ sub.instruction }}</td>
            <td>{{ sub.room }}</td>
            <td>{{ sub.department }}</td>
            <td>{{ sub.time }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="6" class="small">No subjects defined.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
